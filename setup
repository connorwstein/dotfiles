#!/bin/bash
if ! /usr/bin/curl -V; then
    echo "Need to install curl first (apt-get install curl)"
    exit 1
fi

echo "Copying .tmux.config to $HOME/.tmux.config"
cp .gitconfig $HOME/.tmux.config

echo "Copying .gitconfig to $HOME/.gitconfig"
cp .gitconfig $HOME/.gitconfig

echo "Copying .vimrc to $HOME/.vimrc"
cp .vimrc $HOME/.vimrc

echo "Copying cscope_maps.vim to $HOME/.vim/plugin"
mkdir -p $HOME/.vim/plugin
cp cscope_maps.vim $HOME/.vim/plugin/

if [[ -d "$HOME/.vim/bundle" ]] && [[ -d "$HOME/.vim/bundle" ]]; then
    echo "Pathogen already installed"
else
    echo "Installing Pathogen (for installing plugins)"
    mkdir -p $HOME/.vim/autoload $HOME/.vim/bundle
    /usr/bin/curl -LSso $HOME/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim
fi

cd $HOME/.vim/bundle

echo "Installing NERDTree"
if [[ -d "nerdtree" ]]; then
    echo "NERDTree already installed";
else
    /usr/bin/git clone https://github.com/scrooloose/nerdtree.git
fi

echo "Installing Syntastic"
if [[ -d syntastic ]]; then 
    echo "Syntastic already installed";
else
    git clone --depth=1 https://github.com/vim-syntastic/syntastic.git 
fi

echo "Installing Solarized"
if [[ -d "vim-colors-solarized" ]]; then
    echo "Solarized already installed"
else
    /usr/bin/git clone https://github.com/altercation/vim-colors-solarized.git
fi


echo "Setting up bash prompt, source ~/.bash_profile after complete!"
# On OSX bash_profile is the login shell
if ! grep PS1 $HOME/.bash_profile; then
    echo -e "parse_git_branch() {\n\tgit branch 2> /dev/null " \
    "| sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'\n}" >> $HOME/.bash_profile
    echo 'export PS1="\u@\h \[\033[32m\]\w\[\033[33m\]\$(parse_git_branch)\[\033[00m\] $ "' \
    >> $HOME/.bash_profile
fi
if ! grep TERM $HOME/.bash_profile; then
    echo "export TERM=xterm-256color" >> $HOME/.bash_profile
fi
if ! grep "alias hs" $HOME/.bash_profile; then
    echo 'alias hs="history | grep"' >> $HOME/.bash_profile
fi
if ! grep "alias ls" $HOME/.bash_profile; then
    echo 'alias ls="ls -lart"' >> $HOME/.bash_profile
fi
